<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Design & Gallery</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body class="bg">
  <header class="topbar">
    <a class="brand" href="./index.html">← Home</a>
    <nav class="tabs">
      <button id="tabDesign" class="tab active">デザイン</button>
      <button id="tabGallery" class="tab">ランキング</button>
    </nav>
    <div class="right">
      <span id="userBadge" class="badge">connecting...</span>
      <button id="btnLogin" class="btn" type="button">Googleでログイン</button>
      <button id="btnLogout" class="btn" type="button">ログアウト</button>
    </div>
  </header>

  <main class="container">
    <!-- DESIGN -->
    <section id="viewDesign" class="grid2">
      <div class="card">
        <h2>デザイン</h2>

        <div class="row">
          <label class="label" for="templateSelect">テンプレ（服）</label>
          <select id="templateSelect" class="select">
            <option value="assets/templates/tshirt.png">Tシャツ</option>
            <option value="assets/templates/hoodie.png">パーカー</option>
          </select>
          <button id="btnClear" class="btn" type="button">全消し</button>
        </div>

        <div class="canvasWrap">
          <canvas id="designCanvas" width="900" height="900"></canvas>
        </div>

        <div class="row">
          <input id="titleInput" class="input" maxlength="40" placeholder="作品タイトル（任意）" />
          <button id="btnPublish" class="btn primary" type="button">投稿する</button>
        </div>

        <p class="muted">
          操作：クリックで追加 / ドラッグで移動 / ホイールで拡大縮小 / Q,Eで回転 / Deleteで削除
        </p>
        <div id="publishStatus" class="muted"></div>
      </div>

      <div class="card">
        <div class="panelHeader">
          <h2>調整</h2>
          <div class="panelActions">
            <button id="btnUndo" class="btn" type="button">戻す</button>
            <button id="btnRedo" class="btn" type="button">進める</button>
          </div>
        </div>
        <div class="panelTabs">
          <button id="panelStickerBtn" class="panelTab" type="button">ステッカー</button>
          <button id="panelDrawBtn" class="panelTab" type="button">手書き</button>
          <button id="panelTextBtn" class="panelTab active" type="button">文字</button>
        </div>

        <div id="panelText" class="panel">
          <div class="row">
            <label class="label" for="textInput">文字</label>
            <input id="textInput" class="input" maxlength="40" placeholder="入れたい文字" />

            <label class="label" for="textSize">サイズ</label>
            <input id="textSize" class="input" type="range" min="12" max="120" value="36" />
            <span id="textSizeValue" class="muted" style="min-width:36px;text-align:right;">36</span>

          <label class="label" for="textFont">フォント</label>
          <select id="textFont" class="select">
            <option value="Hiragino Maru Gothic ProN">Hiragino Maru Gothic</option>
            <option value="Yu Gothic">Yu Gothic</option>
            <option value="Meiryo">Meiryo</option>
            <option value="Noto Sans JP">Noto Sans JP</option>
            <option value="Yomogi">Yomogi</option>
            <option value="M PLUS Rounded 1c">M PLUS Rounded 1c</option>
            <option value="Zen Maru Gothic">Zen Maru Gothic</option>
            <option value="Kosugi Maru">Kosugi Maru</option>
            <option value="Georgia">Georgia</option>
          </select>

            <button id="btnAddText" class="btn" type="button">文字を追加</button>
          </div>

          <div class="row">
            <label class="label" for="textColor">色</label>
            <input id="textColor" class="input" type="color" value="#ffffff" />

            <label class="label" for="neonPreset">ネオン</label>
            <select id="neonPreset" class="select">
              <option value="">選択</option>
              <option value="#00f5ff">Neon Cyan</option>
              <option value="#39ff14">Neon Green</option>
              <option value="#ff2d95">Neon Pink</option>
              <option value="#b026ff">Neon Purple</option>
              <option value="#fff700">Neon Yellow</option>
            </select>

            <label class="label" for="textAngle">角度</label>
            <input id="textAngle" class="input" type="number" min="-180" max="180" value="0" />

            <label class="label" for="textDirection">横/縦</label>
            <select id="textDirection" class="select">
              <option value="horizontal">横書き</option>
              <option value="vertical">縦書き</option>
            </select>

            <button id="btnApplyText" class="btn" type="button">選択に反映</button>
          </div>

          <div class="row">
            <label class="label" for="textEffect">エフェクト</label>
            <select id="textEffect" class="select">
              <option value="none">なし</option>
              <option value="shadow">シャドウ</option>
              <option value="glow">グロウ</option>
            </select>

            <label class="label" for="textEffectColor">効果色</label>
            <input id="textEffectColor" class="input" type="color" value="#00f5ff" />

            <label class="label" for="textEffectBlur">強さ</label>
            <input id="textEffectBlur" class="input" type="range" min="0" max="60" value="18" />

            <label class="label" for="textStrokeColor">枠色</label>
            <input id="textStrokeColor" class="input" type="color" value="#000000" />

          <label class="label" for="textStrokeWidth">枠太さ</label>
          <input id="textStrokeWidth" class="input" type="range" min="0" max="12" value="0" />
          <span id="textStrokeWidthValue" class="muted" style="min-width:36px;text-align:right;">0</span>
          <span class="rowBreak" aria-hidden="true"></span>
          </div>
        </div>

        <div id="panelDraw" class="panel hidden">
          <div class="row">
            <label class="label" for="toolPen">ツール</label>
            <button id="toolPen" class="btn active" type="button">ペン</button>
            <button id="toolEraser" class="btn" type="button">消しゴム</button>

            <label class="label" for="penColor">ペン色</label>
            <input id="penColor" class="input" type="color" value="#3a2f26" />

            <label class="label" for="penSize">太さ</label>
            <input id="penSize" class="input" type="range" min="1" max="40" value="6" />
            <span id="penSizeValue" class="muted" style="min-width:36px;text-align:right;">6</span>

            <button id="btnClearDraw" class="btn" type="button">手書きを消す</button>
          </div>

          <div class="row">
            <label class="label" for="drawEffect">エフェクト</label>
            <select id="drawEffect" class="select">
              <option value="none">なし</option>
              <option value="shadow">シャドウ</option>
              <option value="glow">グロウ</option>
            </select>

            <label class="label" for="drawEffectColor">効果色</label>
            <input id="drawEffectColor" class="input" type="color" value="#00f5ff" />

            <label class="label" for="drawEffectBlur">強さ</label>
            <input id="drawEffectBlur" class="input" type="range" min="0" max="60" value="18" />

            <label class="label" for="drawStrokeColor">枠色</label>
            <input id="drawStrokeColor" class="input" type="color" value="#000000" />

            <label class="label" for="drawStrokeWidth">枠太さ</label>
            <input id="drawStrokeWidth" class="input" type="range" min="0" max="12" value="0" />
            <span id="drawStrokeWidthValue" class="muted" style="min-width:36px;text-align:right;">0</span>
            <span class="rowBreak" aria-hidden="true"></span>
          </div>
        </div>

        <div id="panelSticker" class="panel hidden">
          <h3 style="margin-top:6px;">使える素材（ステッカー）</h3>
          <div id="assetGrid" class="assetGrid"></div>
          <p class="muted">
            素材はこのフォルダに画像を追加すれば増やせます！<code>assets/stickers/</code>
          </p>
        </div>
      </div>
    </section>

    <!-- GALLERY -->
    <section id="viewGallery" class="hidden">
      <div class="card">
        <div class="row" style="justify-content:space-between;align-items:center;">
          <h2 style="margin:0;">ランキング（いいね順）</h2>
          <div class="row" style="gap:8px;margin:0;">
            <div class="menuWrap">
              <button id="btnRankFilter" class="btn" type="button">全体ランキング ▾</button>
              <div id="rankFilterMenu" class="menuPanel hidden"></div>
            </div>
            <button id="btnRefresh" class="btn" type="button">更新</button>
          </div>
        </div>
        <div id="galleryGrid" class="galleryGrid"></div>
        <div id="galleryStatus" class="muted"></div>
      </div>
    </section>
  </main>

  <!-- Modal -->
  <dialog id="modal" class="modal">
    <div class="modalInner">
      <button id="modalClose" class="iconBtn" type="button">×</button>
      <div id="modalBody"></div>
    </div>
  </dialog>

  <script type="module" src="js/app.js"></script>
</body>
</html>
